---
title: Insert title here
key: d380c2da3116b277f5a0d4ce74e80078

---
## LEFT JOINs in SQL

```yaml
type: "TitleSlide"
key: "6d58ca78f9"
```

`@lower_third`

name: Barbara Donnini
title: President & Analyst, Boxplot


`@script`
Welcome to this lesson on LEFT JOINs in SQL! We'll walk through the syntax for LEFT JOINs, and conceptualize how they work.


---
## Review of INNER JOINs

```yaml
type: "FullSlide"
key: "2f8ab8aaee"
center_content: true
```

`@part1`
As a reminder, an INNER join keeps only rows that two tables have in common.
![https://github.com/bld2104/datacamp-10-sql-interview-questions/blob/master/course_Images/inner-join.png?raw=true](https://github.com/bld2104/datacamp-10-sql-interview-questions/blob/master/course_Images/inner-join.png?raw=true)


`@script`
We already covered INNER JOINs. Recall that an INNER JOIN only keeps rows that the two tables being joined together have in common, based on the column you specify to compare.


---
## Introduction to LEFT JOINs

```yaml
type: "FullSlide"
key: "ff5ec0f07f"
center_content: true
```

`@part1`
A LEFT JOIN keeps everything from the left table (_**no matter what!**_) and only matches up rows from the right table that can be found in the left table.
![https://github.com/bld2104/datacamp-10-sql-interview-questions/blob/master/course_Images/left-join.png?raw=true](https://github.com/bld2104/datacamp-10-sql-interview-questions/blob/master/course_Images/left-join.png?raw=true)


`@script`
A LEFT JOIN, on the other hand, keeps all rows from the LEFT table, no matter what, and only pulls in rows from the RIGHT table that match the LEFT table, again based on the column you tell SQL to compare.


---
## The Sales Table

```yaml
type: "FullSlide"
key: "d9a836b2a8"
```

`@part1`
- 10 rows
- Each row represents a unique sale made by your company. 
- The contact_id column identifies the person that made the purchase.
![Sales Table](https://github.com/bld2104/datacamp-10-sql-interview-questions/blob/master/course_Images/sales_table.png?raw=true)


`@script`
Let's go through a business example. Your company has a database with two tables in it. The first table is this sales table. Notice that it has 10 rows of data, and that each row represents a unique sale made by your company. Also note that it has a contact_id column to identify the person who made the purchase.


---
## The Contacts Table

```yaml
type: "FullSlide"
key: "09cc691bbd"
```

`@part1`
- 20 rows
- Each row represents a unique contact/person. 
- Not all of of your company's contacts may have made a purchase.
 ![Contacts Table](https://github.com/bld2104/datacamp-10-sql-interview-questions/blob/master/course_Images/contacts_table.png?raw=true)


`@script`
The contacts table has 20 rows, and each row represents a unique person that has interacted with your company in some way. This table also has a contact_id column, which is what we'll use to LEFT JOIN this table to the sales table. Note that we have more contacts than sales - not all of your company's contacts may have purchased something.


---
## What percentage of contacts made a purchase?

```yaml
type: "FullSlide"
key: "915d3c1b77"
```

`@part1`
![](image-url)
_Therefore, we need the entire contacts table._


`@script`
Let's say your boss asks you what percentage of your company's contacts made a purchase. Let's first think about the definition of a percentage - we'd need the number of purchases divided by the total number of contacts. That means we need to bring back all rows from the CONTACTS table, since the denominator of the percentage is all contacts. This should clue us in that a LEFT join is necessary


---
## Contacts as the Left Table

```yaml
type: "FullSlide"
key: "a8af8c5f6b"
```

`@part1`
``` SELECT count(sale_id)/count(contacts.contact_id) AS percentage_sales``` {{1}}

```FROM contacts LEFT JOIN sales```{{2}}

```ON sales.contact_id = contacts.contact_id```{{3}}

![](image-url)


`@script`
The SELECT statement would count the rows that have a sale_id (a sale was made) divided by all rows that have a contact_id (total contacts). The FROM contains our LEFT join of contacts and sales. If we display both counts and the percentage, the result should look like this:


---
## Side note: verify your results

```yaml
type: "FullSlide"
key: "3ae40364df"
disable_transition: true
```

`@part1`
There are a few ways you could double-check this result:

**Add each piece of the equation:**

```SELECT COUNT(sale_id) AS num_sales, COUNT(contacts.contact_id) AS total_contacts, COUNT(sale_id)/COUNT(contacts.contact_id) AS percentage_sales```

```FROM contacts LEFT JOIN sales```

```ON contacts.contact_id = sales.contact_id```

![](image-url)


`@script`
And here's what the result would look like. This query will show all the columns and rows from the contacts table, since it's the left table. Lined up to the right of that are all rows from the sales table (or right table) that match the left table based on contact_id. Notice that there are several NULLs in the sales columns. That means that those contacts didn't have a match in the sales table - in other words, they never bought anything from the company.


---
## Side note: verify your results

```yaml
type: "FullSlide"
key: "b1790e946c"
disable_transition: true
```

`@part1`
There are a few ways you could double-check this result:

**Do a SELECT *:**

_(This is easier with smaller datasets.)_

 ![Contacts Left Table JOIN](https://github.com/bld2104/datacamp-10-sql-interview-questions/blob/master/course_Images/contacts-left-table-join.png?raw=true)


`@script`



---
## Can you give me a list of email addresses of all contacts who made a purchase during or after 2015?

```yaml
type: "FullSlide"
key: "5a964851a2"
```

`@part1`
``` SELECT email```
```FROM


`@script`
Now your boss asks for a list of email addresses for contacts who made a purchase during or after 2015. In this case, we don't want everything from the contacts table - only contacts who made a sale. We still need to do a it makes sense for us to choose SALES as the LEFT table, since that will bring back only rows


---
## Sales as the Left Table

```yaml
type: "FullSlide"
key: "c53cf389a8"
```

`@part1`
``` SELECT email ```{{2}}

```FROM sales LEFT JOIN contacts```{{3}}

``` ON sales.contact_id = contacts.contact_id ``` {{4}}

```WHERE date > '2015-01-01'``` {{5}}


`@script`
Now, let's flip the order of the tables and perform a LEFT JOIN with the Sales table as the left table. This is what the syntax would look like if we select all of the columns:


---
## Sales as the Left Table

```yaml
type: "FullSlide"
key: "d0270999d4"
disable_transition: true
```

`@part1`
``` SELECT * ```

```FROM sales LEFT JOIN contacts```

``` ON sales.contact_id = contacts.contact_id ```

![Sales Left Table JOIN](https://github.com/bld2104/datacamp-10-sql-interview-questions/blob/master/course_Images/sales-left-table-join.png?raw=true)


`@script`
And this is what the result would look like. We keep everything from the sales table since it's the left one this time, and only pull in rows from the contacts table that match based on contact_id. Not all contacts are appearing since not all of them made a purchase.


---
## Compare the Results

```yaml
type: "TwoColumns"
key: "f4ea56199d"
```

`@part1`
Reiterate business question
![Contacts Left Table JOIN](https://github.com/bld2104/datacamp-10-sql-interview-questions/blob/master/course_Images/contacts-left-table-join.png?raw=true)


`@part2`
![Sales Left Table JOIN](https://github.com/bld2104/datacamp-10-sql-interview-questions/blob/master/course_Images/sales-left-table-join.png?raw=true)


`@script`
Here's a summary of results with business questionsTake a look at the two results side-by-side: they look very different don't they? Unlike INNER JOINs, the order of the tables matters for LEFT JOINs, and you may get a different result depending on the data if you flip the tables.


---
## Now let's practice!

```yaml
type: "FinalSlide"
key: "6bff76e8f7"
```

`@script`
That's all for LEFT JOINs - now let's practice!

